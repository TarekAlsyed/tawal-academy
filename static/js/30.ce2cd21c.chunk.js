"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[30],{868(s,e,a){a.d(e,{A:()=>r});var n=a(43),t=a(29),i=a(115),c=a(729),l=a(772),d=(a(497),a(579));const r=s=>{let{children:e}=s;const{admin:a,adminLogout:r}=(0,c.As)(),o=(0,t.Zp)(),m=(0,t.zy)(),[h,x]=(0,n.useState)(!1),j=[{path:"/admin",label:"\u0627\u0644\u0625\u062d\u0635\u0627\u0626\u064a\u0627\u062a",icon:(0,d.jsx)(l.ARf,{})},{path:"/admin/terms",label:"\u0625\u062f\u0627\u0631\u0629 \u0627\u0644\u062a\u0631\u0645\u0627\u062a",icon:(0,d.jsx)(l.s_k,{})},{path:"/admin/subjects",label:"\u0625\u062f\u0627\u0631\u0629 \u0627\u0644\u0645\u0648\u0627\u062f",icon:(0,d.jsx)(l.H9b,{})},{path:"/admin/students",label:"\u0625\u062f\u0627\u0631\u0629 \u0627\u0644\u0637\u0644\u0628\u0629",icon:(0,d.jsx)(l.cfS,{})},{path:"/admin/questions",label:"\u0623\u0633\u0626\u0644\u0629 \u0627\u0644\u0637\u0644\u0628\u0629",icon:(0,d.jsx)(l.jH2,{})}],p=()=>x(!h);return(0,d.jsxs)("div",{className:"admin-container",children:[(0,d.jsx)("button",{className:"mobile-menu-toggle",onClick:p,children:h?(0,d.jsx)(l.yGN,{}):(0,d.jsx)(l.ND1,{})}),(0,d.jsxs)("aside",{className:"admin-sidebar ".concat(h?"open":""),children:[(0,d.jsxs)("div",{className:"sidebar-header",children:[(0,d.jsx)("h2",{children:"\ud83c\udf93 Tawal Academy"}),(0,d.jsx)("p",{children:"\u0644\u0648\u062d\u0629 \u0627\u0644\u062a\u062d\u0643\u0645"})]}),(0,d.jsx)("nav",{className:"sidebar-nav",children:j.map(s=>(0,d.jsxs)("button",{className:"nav-item ".concat(m.pathname===s.path?"active":""),onClick:()=>{o(s.path),x(!1)},children:[s.icon," ",s.label]},s.path))}),(0,d.jsxs)("div",{className:"sidebar-footer",children:[(0,d.jsxs)("div",{className:"admin-info",children:[(0,d.jsx)("p",{children:null===a||void 0===a?void 0:a.name}),(0,d.jsx)("small",{children:null===a||void 0===a?void 0:a.email})]}),(0,d.jsxs)("button",{className:"btn-logout",onClick:()=>{r(),o("/admin/login"),i.oR.success("\u062a\u0645 \u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062e\u0631\u0648\u062c \u0628\u0646\u062c\u0627\u062d")},children:[(0,d.jsx)(l.QeK,{})," \u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062e\u0631\u0648\u062c"]})]})]}),h&&(0,d.jsx)("div",{className:"sidebar-overlay",onClick:p}),(0,d.jsx)("main",{className:"admin-main",children:e})]})}},30(s,e,a){a.r(e),a.d(e,{default:()=>m});var n=a(43),t=a(29),i=a(115),c=a(305),l=a(227),d=a(772),r=a(868),o=(a(893),a(579));const m=()=>{var s,e,a;const{id:m}=(0,t.g)(),h=(0,t.Zp)(),[x,j]=(0,n.useState)(null),[p,u]=(0,n.useState)(!0),[b,v]=(0,n.useState)("pdfs"),[g,N]=(0,n.useState)(!1);(0,n.useEffect)(()=>{y()},[m]);const y=async()=>{try{const s=await c.Ay.get(l.Sn.ADMIN_SUBJECT_BY_ID(m));s.data.success&&j(s.data.data.subject)}catch(s){i.oR.error("\u0641\u0634\u0644 \u062a\u062d\u0645\u064a\u0644 \u0627\u0644\u0645\u0627\u062f\u0629")}finally{u(!1)}};return p?(0,o.jsx)(r.A,{children:(0,o.jsx)("div",{className:"loading",children:"\u062c\u0627\u0631\u064a \u0627\u0644\u062a\u062d\u0645\u064a\u0644..."})}):x?(0,o.jsxs)(r.A,{children:[(0,o.jsxs)("div",{className:"page-header",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("h1",{children:x.name}),(0,o.jsx)("p",{children:x.term_name})]}),(0,o.jsx)("button",{className:"btn-primary",onClick:()=>h("/admin/subjects"),children:"\u0631\u062c\u0648\u0639 \u0644\u0644\u0645\u0648\u0627\u062f"})]}),(0,o.jsxs)("div",{className:"tabs",children:[(0,o.jsxs)("button",{className:"tab ".concat("pdfs"===b?"active":""),onClick:()=>v("pdfs"),children:["\u0645\u0644\u0641\u0627\u062a PDF (",(null===(s=x.pdfs)||void 0===s?void 0:s.length)||0,")"]}),(0,o.jsxs)("button",{className:"tab ".concat("images"===b?"active":""),onClick:()=>v("images"),children:["\u0627\u0644\u0635\u0648\u0631 (",(null===(e=x.images)||void 0===e?void 0:e.length)||0,")"]}),(0,o.jsxs)("button",{className:"tab ".concat("exams"===b?"active":""),onClick:()=>v("exams"),children:["\u0627\u0644\u0627\u0645\u062a\u062d\u0627\u0646\u0627\u062a (",(null===(a=x.exams)||void 0===a?void 0:a.length)||0,")"]})]}),(0,o.jsxs)("div",{className:"content-card",children:["pdfs"===b&&(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{className:"upload-section",children:[(0,o.jsxs)("label",{className:"btn-upload",children:[(0,o.jsx)(d.B88,{})," ",g?"\u062c\u0627\u0631\u064a \u0627\u0644\u0631\u0641\u0639...":"\u0631\u0641\u0639 \u0645\u0644\u0641\u0627\u062a PDF",(0,o.jsx)("input",{type:"file",multiple:!0,accept:".pdf",onChange:async s=>{const e=s.target.files;if(!e||0===e.length)return;const a=new FormData;for(let t=0;t<e.length;t++)a.append("pdfs",e[t]);N(!0);try{await c.Ay.post(l.Sn.ADMIN_UPLOAD_PDFS(m),a,{headers:{"Content-Type":"multipart/form-data"}}),i.oR.success("\u062a\u0645 \u0631\u0641\u0639 ".concat(e.length," \u0645\u0644\u0641 \u0628\u0646\u062c\u0627\u062d")),y()}catch(n){i.oR.error("\u0641\u0634\u0644 \u0631\u0641\u0639 \u0627\u0644\u0645\u0644\u0641\u0627\u062a")}finally{N(!1)}},disabled:g,style:{display:"none"}})]}),(0,o.jsx)("small",{children:"\u064a\u0645\u0643\u0646\u0643 \u0631\u0641\u0639 \u0639\u062f\u0629 \u0645\u0644\u0641\u0627\u062a \u0641\u064a \u0648\u0642\u062a \u0648\u0627\u062d\u062f"})]}),x.pdfs&&x.pdfs.length>0?(0,o.jsxs)("table",{className:"data-table",children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{children:"\u0627\u0633\u0645 \u0627\u0644\u0645\u0644\u0641"}),(0,o.jsx)("th",{children:"\u0639\u062f\u062f \u0627\u0644\u062a\u062d\u0645\u064a\u0644\u0627\u062a"}),(0,o.jsx)("th",{children:"\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0631\u0641\u0639"}),(0,o.jsx)("th",{children:"\u0627\u0644\u0625\u062c\u0631\u0627\u0621\u0627\u062a"})]})}),(0,o.jsx)("tbody",{children:x.pdfs.map(s=>(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:s.title}),(0,o.jsx)("td",{children:s.downloads_count}),(0,o.jsx)("td",{children:new Date(s.created_at).toLocaleDateString("ar-EG")}),(0,o.jsx)("td",{children:(0,o.jsx)("button",{className:"btn-icon delete",onClick:()=>(async s=>{if(window.confirm("\u0647\u0644 \u0623\u0646\u062a \u0645\u062a\u0623\u0643\u062f \u0645\u0646 \u062d\u0630\u0641 \u0647\u0630\u0627 \u0627\u0644\u0645\u0644\u0641\u061f"))try{await c.Ay.delete(l.Sn.ADMIN_DELETE_PDF(m,s)),i.oR.success("\u062a\u0645 \u062d\u0630\u0641 \u0627\u0644\u0645\u0644\u0641 \u0628\u0646\u062c\u0627\u062d"),y()}catch(e){i.oR.error("\u0641\u0634\u0644 \u062d\u0630\u0641 \u0627\u0644\u0645\u0644\u0641")}})(s.id),children:(0,o.jsx)(d.IXo,{})})})]},s.id))})]}):(0,o.jsx)("div",{className:"empty-state",children:"\u0644\u0627 \u062a\u0648\u062c\u062f \u0645\u0644\u0641\u0627\u062a PDF"})]}),"images"===b&&(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{className:"upload-section",children:[(0,o.jsxs)("label",{className:"btn-upload",children:[(0,o.jsx)(d.B88,{})," ",g?"\u062c\u0627\u0631\u064a \u0627\u0644\u0631\u0641\u0639...":"\u0631\u0641\u0639 \u0635\u0648\u0631",(0,o.jsx)("input",{type:"file",multiple:!0,accept:"image/*",onChange:async s=>{const e=s.target.files;if(!e||0===e.length)return;const a=new FormData;for(let t=0;t<e.length;t++)a.append("images",e[t]);N(!0);try{await c.Ay.post(l.Sn.ADMIN_UPLOAD_IMAGES(m),a,{headers:{"Content-Type":"multipart/form-data"}}),i.oR.success("\u062a\u0645 \u0631\u0641\u0639 ".concat(e.length," \u0635\u0648\u0631\u0629 \u0628\u0646\u062c\u0627\u062d")),y()}catch(n){i.oR.error("\u0641\u0634\u0644 \u0631\u0641\u0639 \u0627\u0644\u0635\u0648\u0631")}finally{N(!1)}},disabled:g,style:{display:"none"}})]}),(0,o.jsx)("small",{children:"\u064a\u0645\u0643\u0646\u0643 \u0631\u0641\u0639 \u0639\u062f\u0629 \u0635\u0648\u0631 \u0641\u064a \u0648\u0642\u062a \u0648\u0627\u062d\u062f"})]}),x.images&&x.images.length>0?(0,o.jsx)("div",{className:"images-grid",children:x.images.map(s=>(0,o.jsxs)("div",{className:"image-card",children:[(0,o.jsx)("img",{src:(0,l.w8)(s.file_url),alt:s.title}),(0,o.jsxs)("div",{className:"image-overlay",children:[(0,o.jsx)("p",{children:s.title}),(0,o.jsx)("button",{className:"btn-icon delete",onClick:()=>(async s=>{if(window.confirm("\u0647\u0644 \u0623\u0646\u062a \u0645\u062a\u0623\u0643\u062f \u0645\u0646 \u062d\u0630\u0641 \u0647\u0630\u0647 \u0627\u0644\u0635\u0648\u0631\u0629\u061f"))try{await c.Ay.delete(l.Sn.ADMIN_DELETE_IMAGE(m,s)),i.oR.success("\u062a\u0645 \u062d\u0630\u0641 \u0627\u0644\u0635\u0648\u0631\u0629 \u0628\u0646\u062c\u0627\u062d"),y()}catch(e){i.oR.error("\u0641\u0634\u0644 \u062d\u0630\u0641 \u0627\u0644\u0635\u0648\u0631\u0629")}})(s.id),children:(0,o.jsx)(d.IXo,{})})]})]},s.id))}):(0,o.jsx)("div",{className:"empty-state",children:"\u0644\u0627 \u062a\u0648\u062c\u062f \u0635\u0648\u0631"})]}),"exams"===b&&(0,o.jsxs)("div",{children:[(0,o.jsxs)("button",{className:"btn-primary",onClick:()=>h("/admin/add-exam/".concat(m)),children:[(0,o.jsx)(d.GGD,{})," \u0625\u0636\u0627\u0641\u0629 \u0627\u0645\u062a\u062d\u0627\u0646 \u062c\u062f\u064a\u062f"]}),x.exams&&x.exams.length>0?(0,o.jsx)("div",{className:"exams-list",children:x.exams.map(s=>(0,o.jsxs)("div",{className:"exam-card",children:[(0,o.jsxs)("div",{children:[(0,o.jsxs)("h3",{children:[s.name," - \u0627\u0644\u0645\u0633\u062a\u0648\u0649 ",s.level]}),(0,o.jsxs)("p",{children:[s.questions_count," \u0633\u0624\u0627\u0644"]})]}),(0,o.jsxs)("div",{className:"exam-actions-group",children:[(0,o.jsx)("button",{className:"btn-icon ".concat("open"===s.status?"danger":"success"),onClick:()=>(async(s,e)=>{try{const a="open"===e?"closed":"open";(await c.Ay.put("/admin/exams/".concat(s),{status:a})).data.success&&(i.oR.success("open"===a?"\u062a\u0645 \u0641\u062a\u062d \u0627\u0644\u0627\u0645\u062a\u062d\u0627\u0646 \u0628\u0646\u062c\u0627\u062d":"\u062a\u0645 \u0642\u0641\u0644 \u0627\u0644\u0627\u0645\u062a\u062d\u0627\u0646 \u0628\u0646\u062c\u0627\u062d"),y())}catch(a){i.oR.error("\u0641\u0634\u0644 \u062a\u063a\u064a\u064a\u0631 \u062d\u0627\u0644\u0629 \u0627\u0644\u0627\u0645\u062a\u062d\u0627\u0646")}})(s.id,s.status),title:"open"===s.status?"\u0642\u0641\u0644 \u0627\u0644\u0627\u0645\u062a\u062d\u0627\u0646":"\u0641\u062a\u062d \u0627\u0644\u0627\u0645\u062a\u062d\u0627\u0646",children:"open"===s.status?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(d.F5$,{})," \u0642\u0641\u0644"]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(d.K4k,{})," \u0641\u062a\u062d"]})}),(0,o.jsx)("button",{className:"btn-primary",onClick:()=>h("/admin/manage-questions/".concat(s.id)),children:"\u0625\u062f\u0627\u0631\u0629 \u0627\u0644\u0623\u0633\u0626\u0644\u0629"})]})]},s.id))}):(0,o.jsx)("div",{className:"empty-state",children:"\u0644\u0627 \u062a\u0648\u062c\u062f \u0627\u0645\u062a\u062d\u0627\u0646\u0627\u062a"})]})]})]}):(0,o.jsx)(r.A,{children:(0,o.jsx)("div",{children:"\u0627\u0644\u0645\u0627\u062f\u0629 \u063a\u064a\u0631 \u0645\u0648\u062c\u0648\u062f\u0629"})})}},497(){},893(){}}]);
//# sourceMappingURL=30.ce2cd21c.chunk.js.map