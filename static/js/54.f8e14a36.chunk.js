"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[54],{54(s,e,a){a.r(e),a.d(e,{default:()=>m});var c=a(43),l=a(29),n=a(115),i=a(729),d=a(305),t=a(227),r=a(772),o=a(579);const m=()=>{var s,e,a;const{id:m}=(0,l.g)(),h=(0,l.Zp)(),{user:x,refreshUser:u}=(0,i.As)(),[j,v]=(0,c.useState)(null),[p,N]=(0,c.useState)(!0),[f,g]=(0,c.useState)("pdfs"),[b,_]=(0,c.useState)(0);(0,c.useEffect)(()=>{w()},[m]);const w=async()=>{try{N(!0);const s=await d.Ay.get(t.Sn.SUBJECT_BY_ID(m));s.data.success&&(v(s.data.data.subject),_(s.data.data.subject.user_rating||0))}catch(s){n.oR.error("\u0641\u0634\u0644 \u062a\u062d\u0645\u064a\u0644 \u0627\u0644\u0645\u0627\u062f\u0629"),h("/")}finally{N(!1)}},k=s=>{if(1===s.level)return!0;return!!j.exams.find(e=>e.level===s.level-1)&&s.can_access};return p?(0,o.jsx)("div",{className:"loading",children:"\u062c\u0627\u0631\u064a \u0627\u0644\u062a\u062d\u0645\u064a\u0644..."}):j?(0,o.jsxs)("div",{className:"student-subject-container",children:[(0,o.jsx)("header",{className:"subject-header",children:(0,o.jsxs)("div",{className:"header-content",children:[(0,o.jsxs)("button",{className:"btn-back",onClick:()=>h("/"),children:[(0,o.jsx)(r.dyV,{})," \u0627\u0644\u0639\u0648\u062f\u0629"]}),(0,o.jsxs)("div",{className:"header-info",children:[(0,o.jsx)("h1",{children:j.name}),(0,o.jsx)("p",{children:j.description})]}),(0,o.jsx)("div",{className:"user-points",children:(0,o.jsxs)("span",{children:["\u2b50 ",(null===x||void 0===x?void 0:x.total_points)||0," \u0646\u0642\u0637\u0629"]})})]})}),(0,o.jsxs)("div",{className:"subject-tabs",children:[(0,o.jsxs)("button",{className:"pdfs"===f?"active":"",onClick:()=>g("pdfs"),children:["\ud83d\udcc4 \u0627\u0644\u0645\u0644\u0641\u0627\u062a (",(null===(s=j.pdfs)||void 0===s?void 0:s.length)||0,")"]}),(0,o.jsxs)("button",{className:"images"===f?"active":"",onClick:()=>g("images"),children:["\ud83d\uddbc\ufe0f \u0627\u0644\u0635\u0648\u0631 (",(null===(e=j.images)||void 0===e?void 0:e.length)||0,")"]}),(0,o.jsxs)("button",{className:"exams"===f?"active":"",onClick:()=>g("exams"),children:["\ud83d\udcdd \u0627\u0644\u0627\u0645\u062a\u062d\u0627\u0646\u0627\u062a (",(null===(a=j.exams)||void 0===a?void 0:a.length)||0,")"]})]}),(0,o.jsxs)("div",{className:"subject-content",children:["pdfs"===f&&(0,o.jsx)("div",{className:"pdfs-section",children:j.pdfs&&j.pdfs.length>0?(0,o.jsx)("div",{className:"pdfs-grid",children:j.pdfs.map(s=>(0,o.jsxs)("div",{className:"pdf-card",children:[(0,o.jsx)("div",{className:"pdf-icon",children:"\ud83d\udcc4"}),(0,o.jsx)("h3",{children:s.title}),(0,o.jsxs)("p",{children:["\u062a\u0645 \u0627\u0644\u062a\u062d\u0645\u064a\u0644 ",s.downloads_count," \u0645\u0631\u0629"]}),(0,o.jsxs)("button",{className:"btn-download",onClick:()=>(async s=>{const e=window.open("","_blank");e&&e.document.write("\u062c\u0627\u0631\u064a \u0627\u0644\u062a\u062d\u0645\u064a\u0644...");try{const a=await d.Ay.post(t.Sn.DOWNLOAD_PDF(m,s));if(a.data.success&&(a.data.data.full_url||a.data.data.url)){const s=a.data.data.full_url||(0,t.w8)(a.data.data.url);e?e.location.href=s:window.open(s,"_blank"),n.oR.success("\u062a\u0645 \u0625\u0636\u0627\u0641\u0629 5 \u0646\u0642\u0627\u0637! \ud83c\udf89"),u(),w()}else e&&e.close(),n.oR.error("\u0641\u0634\u0644 \u0627\u0644\u062d\u0635\u0648\u0644 \u0639\u0644\u0649 \u0631\u0627\u0628\u0637 \u0627\u0644\u0645\u0644\u0641")}catch(a){e&&e.close(),n.oR.error("\u062d\u062f\u062b \u062e\u0637\u0623 \u0623\u062b\u0646\u0627\u0621 \u062a\u062d\u0645\u064a\u0644 \u0627\u0644\u0645\u0644\u0641")}})(s.id),children:[(0,o.jsx)(r.a4x,{})," \u062a\u062d\u0645\u064a\u0644 (5 \u0646\u0642\u0627\u0637)"]})]},s.id))}):(0,o.jsx)("div",{className:"empty-state",children:"\u0644\u0627 \u062a\u0648\u062c\u062f \u0645\u0644\u0641\u0627\u062a \u0645\u062a\u0627\u062d\u0629"})}),"images"===f&&(0,o.jsx)("div",{className:"images-section",children:j.images&&j.images.length>0?(0,o.jsx)("div",{className:"images-grid",children:j.images.map(s=>(0,o.jsxs)("div",{className:"image-card",onClick:()=>(async s=>{const e=window.open("","_blank");e&&e.document.write("\u062c\u0627\u0631\u064a \u0627\u0644\u062a\u062d\u0645\u064a\u0644...");try{const a=await d.Ay.post(t.Sn.VIEW_IMAGE(m,s));if(a.data.success&&(a.data.data.full_url||a.data.data.url)){const s=a.data.data.full_url||(0,t.w8)(a.data.data.url);e?e.location.href=s:window.open(s,"_blank"),n.oR.success("\u062a\u0645 \u0625\u0636\u0627\u0641\u0629 2 \u0646\u0642\u0637\u0629! \u2b50"),u(),w()}else e&&e.close(),n.oR.error("\u0641\u0634\u0644 \u0627\u0644\u062d\u0635\u0648\u0644 \u0639\u0644\u0649 \u0631\u0627\u0628\u0637 \u0627\u0644\u0635\u0648\u0631\u0629")}catch(a){e&&e.close(),n.oR.error("\u062d\u062f\u062b \u062e\u0637\u0623 \u0623\u062b\u0646\u0627\u0621 \u0639\u0631\u0636 \u0627\u0644\u0635\u0648\u0631\u0629")}})(s.id),children:[(0,o.jsx)("img",{src:(0,t.w8)(s.file_url),alt:s.title}),(0,o.jsxs)("div",{className:"image-info",children:[(0,o.jsx)("p",{children:s.title}),(0,o.jsxs)("small",{children:["\u062a\u0645 \u0627\u0644\u0645\u0634\u0627\u0647\u062f\u0629 ",s.views_count," \u0645\u0631\u0629"]})]})]},s.id))}):(0,o.jsx)("div",{className:"empty-state",children:"\u0644\u0627 \u062a\u0648\u062c\u062f \u0635\u0648\u0631 \u0645\u062a\u0627\u062d\u0629"})}),"exams"===f&&(0,o.jsx)("div",{className:"exams-section",children:j.exams&&j.exams.length>0?(0,o.jsx)("div",{className:"exams-list",children:j.exams.map(s=>(0,o.jsxs)("div",{className:"exam-card ".concat(k(s)?"":"locked"),children:[(0,o.jsxs)("div",{className:"exam-info",children:[(0,o.jsx)("h3",{children:s.name}),(0,o.jsxs)("p",{children:["\u0627\u0644\u0645\u0633\u062a\u0648\u0649 ",s.level]}),(0,o.jsxs)("span",{className:"questions-count",children:[s.questions_count," \u0633\u0624\u0627\u0644"]}),s.best_score&&(0,o.jsxs)("span",{className:"best-score",children:["\u0623\u0641\u0636\u0644 \u0646\u062a\u064a\u062c\u0629: ",s.best_score,"%"]})]}),k(s)?(0,o.jsx)("button",{className:"btn-start-exam",onClick:()=>h("/exam/".concat(s.id)),children:"\u0628\u062f\u0621 \u0627\u0644\u0627\u0645\u062a\u062d\u0627\u0646"}):(0,o.jsxs)("div",{className:"exam-locked",children:["\ud83d\udd12 \u0645\u063a\u0644\u0642",(0,o.jsxs)("small",{children:["\u0627\u062c\u062a\u0627\u0632 \u0627\u0644\u0645\u0633\u062a\u0648\u0649 ",s.level-1," \u0623\u0648\u0644\u0627\u064b"]})]})]},s.id))}):(0,o.jsx)("div",{className:"empty-state",children:"\u0644\u0627 \u062a\u0648\u062c\u062f \u0627\u0645\u062a\u062d\u0627\u0646\u0627\u062a \u0645\u062a\u0627\u062d\u0629"})})]}),(0,o.jsxs)("div",{className:"rating-section",children:[(0,o.jsx)("h3",{children:"\u0642\u064a\u0651\u0645 \u0647\u0630\u0647 \u0627\u0644\u0645\u0627\u062f\u0629"}),(0,o.jsx)("div",{className:"stars",children:[1,2,3,4,5].map(s=>(0,o.jsx)(r.usP,{className:s<=(b||j.user_rating||0)?"filled":"",onClick:()=>(async s=>{try{await d.Ay.post(t.Sn.RATE_SUBJECT(m),{rating:s}),_(s),n.oR.success("\u0634\u0643\u0631\u0627\u064b \u0644\u062a\u0642\u064a\u064a\u0645\u0643! \u062a\u0645 \u0625\u0636\u0627\u0641\u0629 3 \u0646\u0642\u0627\u0637 \ud83c\udf1f"),u(),w()}catch(c){var e,a;n.oR.error((null===(e=c.response)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.message)||"\u062d\u062f\u062b \u062e\u0637\u0623 \u0623\u062b\u0646\u0627\u0621 \u0627\u0644\u062a\u0642\u064a\u064a\u0645")}})(s)},s))}),j.avg_rating>0&&(0,o.jsxs)("p",{children:["\u0627\u0644\u062a\u0642\u064a\u064a\u0645 \u0627\u0644\u0639\u0627\u0645: ",Number(j.avg_rating).toFixed(1)," \u2b50 (",j.ratings_count," \u062a\u0642\u064a\u064a\u0645)"]})]})]}):(0,o.jsx)("div",{className:"loading",children:"\u0627\u0644\u0645\u0627\u062f\u0629 \u063a\u064a\u0631 \u0645\u0648\u062c\u0648\u062f\u0629"})}}}]);
//# sourceMappingURL=54.f8e14a36.chunk.js.map